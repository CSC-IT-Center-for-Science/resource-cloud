---
data:
  #############################################################################
  ### Default system setup
  # admin
  - !User
    id: u-1
    eppn: admin@example.org
    password: admin
    is_admin: True

  # worker
  - !User
    id: u-2
    eppn: worker@pebbles
    password: worker
    is_admin: True

  # default workspace
  - !Workspace
    id: ws-0
    name: System.default

  # associate admin with default workspace
  - !WorkspaceUserAssociation
    workspace_id: ws-0
    user_id: u-1
    owner: True

  # example Jupyter template + environment in public workspace
  - !EnvironmentTemplate
    id: et-1
    name: Example
    cluster: local_kubernetes
    is_enabled: True
    allowed_attrs:
      - maximum_lifetime
    config:
      args: jupyter notebook --NotebookApp.token=''
      autodownload_filename: ''
      autodownload_url: ''
      cluster: local_kubernetes
      cost_multiplier: 0
      description: Jupyter in local k8s
      environment_vars: ''
      image: jupyter/minimal-notebook
      labels: Data Analytics, Python, Jupyter
      maximum_instances_per_user: 1
      maximum_lifetime: 1h 0m
      memory_limit: 512M
      port: 8888
      show_password: true
      volume_mount_path: /data
    environment_form:
      - key: name
        placeholder: Environment name
        type: textfield
      - key: description
        placeholder: Environment details
        type: textarea
      - maximum_lifetime
    environment_model:
      description: ''
      maximum_lifetime: 1h 0m
      name: ''
    environment_schema:
      description: Description
      properties:
        description:
          type: string
        maximum_lifetime:
          default: 1h 0m
          pattern: ^(\d+d\s?)?(\d{1,2}h\s?)?(\d{1,2}m\s?)?$
          title: Maximum life-time (days hours mins)
          type: string
          validationMessage: Value should be in format [days]d [hours]h [minutes]m
        name:
          type: string
      required:
      - name
      - description
      title: Comment
      type: object

  - !Environment
    id: e-1
    name: Jupyter minimal notebook
    template_id: et-1
    workspace_id: ws-0
    is_enabled: True
    config:
      name: Jupyter minimal notebook

  #############################################################################
  ### Normal user with no extra workspace associations
  - !User
    id: u-user-1
    eppn: user-1@example.org
    password: user-1

  - !WorkspaceUserAssociation
    workspace_id: ws-0
    user_id: u-user-1

  #############################################################################
  ### User owner-1 with one Workspace

  - !User
    id: u-owner-1
    eppn: owner-1@example.org
    password: owner-1
    workspace_quota: 2

  - !WorkspaceUserAssociation
    workspace_id: ws-0
    user_id: u-owner-1

  - !Workspace
    id: ws-1
    name: Workspace 1

  - !WorkspaceUserAssociation
    workspace_id: ws-1
    user_id: u-owner-1
    owner: True
    manager: True


  #############################################################################
  ### User owner-2 with no Workspaces, just quota

  - !User
    id: u-owner-2
    eppn: owner-2@example.org
    password: owner-2
    workspace_quota: 2
